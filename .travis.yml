language: python
python: '2.7'
before_install:
- sudo apt-get update -qq
- sudo apt-get install -y curl
install:
- pip install ansible
- "{ echo '[defaults]'; echo 'roles_path = ../'; } >> ansible.cfg"
script:
- ansible-playbook -i tests/inventory tests/test.yml --syntax-check
- ansible-playbook -i tests/inventory tests/test.yml --connection=local --sudo
- 'ansible-playbook -i tests/inventory tests/test.yml --connection=local --sudo |
  grep -q ''changed=0.*failed=0'' && (echo ''Idempotence test: pass'' && exit 0) ||
  (echo ''Idempotence test: fail'' && exit 1)

'
notifications:
  email: false
env:
  global:
    secure: UrKyRN7Iq8DDtQKfVswzwAs1pa7qxuLpXUDR7FzIfE9588Co+/668uvo+qjapkyhGTnNuXHgeD2n9rHEM4Afuyfo3j0rlwkF4qT01fTqXAZgrhk5yW8H1+0bbUxvIT+N4A2N3n13EIJAGYBPWDhQQYtwAj8NEv9kPQndc4Twkbw=
